# Workflow for deploying a static website to GitHub Pages

name: Deploy Static Website

on:
  # Runs on pushes targeting the main branch
  push:
    branches: ["main"]

  # Allows manual runs from the Actions tab
  workflow_dispatch:

# Permissions for deployment
permissions:
  contents: read
  pages: write
  id-token: write

# Allow only one concurrent deployment
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # Build job
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4  # Checkout code from repository

      - name: Build static site (replace with your build command)
        run: |  # Replace with your specific build command(s) for HTML/CSS
                  # This example assumes your static files are in a folder named "dist"
                  # Modify the commands and path as needed for your project structure
                  cd website  # Assuming your HTML/CSS files are in a folder called "website"
                  npm install  # Install dependencies if you have any (modify if using yarn)
                  npm run build  # Replace with your build command (e.g., gulp build)
                  mv dist/* ../out  # Move built files to the "out" folder for deployment

  # Deployment job
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
        with:
          source: ./out  # Path to the folder containing your built static files
          github-token: ${{ secrets.GITHUB_TOKEN }}
